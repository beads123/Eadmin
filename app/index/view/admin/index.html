{include file="/admin/head"}
                    <!--/.span3-->
                    <div class="span9">
                        <div class="content">
                            <div class="btn-controls">
                                <div class="btn-box-row row-fluid">
                                    <a href="#" class="btn-box big span4"><i class=" icon-random"></i><b>65%</b>
                                        <p class="text-muted">Growth</p>
                                    </a><a href="#" class="btn-box big span4"><i class="icon-user"></i><b>15</b>
                                        <p class="text-muted">New Users</p>
                                    </a><a href="#" class="btn-box big span4"><i class="icon-money"></i><b>15,152</b>
                                        <p class="text-muted">Profit</p>
                                    </a>
                                </div>
                                <div class="btn-box-row row-fluid">
                                    <div class="span8">
                                        <div class="row-fluid">
                                            <div class="span12">
                                                <button type="button" onclick="document.getElementById('light').style.display='block';" class="btn-box small span4"><i class="icon-envelope"></i><b>SendMail</b></button>
                                                <a href="#" class="btn-box small span4"><i class="icon-group"></i><b>客户端</b></a>
												<button type="button" onclick="document.getElementById('aliyundns').style.display='block';" class="btn-box small span4"><i class="icon-exchange"></i><b>域名解析</b></button>
                                            </div>
                                        </div>
                                        <div class="row-fluid">
                                            <div class="span12">
                                                <a href="#" class="btn-box small span4"><i class="icon-save"></i><b>资源下载</b>
                                                </a><a href="#" class="btn-box small span4"><i class="icon-bullhorn"></i><b>消 息</b>
                                                </a><a href="#" class="btn-box small span4"><i class="icon-sort-down"></i><b>Bounce Rate</b></a>
                                            </div>
                                        </div>
                                    </div>
                                    <ul class="widget widget-usage unstyled span4">
                                        <li>
                                            <p>
                                                <strong id="mem_html_one">Memory 0/0M</strong> <span class="pull-right small muted" id="mem_html">0%</span>
                                            </p>
                                            <div class="progress tight">
                                                <div class="bar" style="width: 0%;" id="mem_style">
                                                </div>
                                            </div>
                                        </li>
                                        <li>
                                            <p>
                                                <strong>NetWork</strong> <span class="pull-right small muted" id="network_html"></span>
                                            </p>
                                            <div class="progress tight">
                                                <div class="bar bar-success" style="width: 0%;">
                                                </div>
                                            </div>
                                        </li>
                                        <li>
                                            <p>
                                                <strong>CPU 使用率</strong> <span class="pull-right small muted" id="cpu_html">0%</span>
                                            </p>
                                            <div class="progress tight">
                                                <div class="bar bar-warning" style="width: 0px" id="cpu_style">
                                                </div>
                                            </div>
                                        </li>
                                        <li>
                                            <p>
                                                <strong>磁盘空间</strong> <span class="pull-right small muted" id="disk_html">0%</span>
                                            </p>
                                            <div class="progress tight">
                                                <div class="bar bar-danger" style="width: 0%;" id="disk_style">
                                                </div>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <!--/#btn-controls-->
                            <div class="module">
                                <div class="module-head">
                                    <h3>网络使用状况</h3>
                                </div>
                                <div class="module-body">
									 <table width="100%">
									{for start="0" end="$down" }

										 <tr>
											<td width="13%">{$arr[$i][1][0]} : </td>
											<td width="29%">入网: <font color='#CC0000'><span id="NetInput{$i}"></span></font></td>
											<td width="14%">实时: <font color='#CC0000'><span id="NetInputSpeed{$i}">K/s</span></font></td>
											<td width="29%">出网: <font color='#CC0000'><span id="NetOut{$i}"></span></font></td>
											<td width="14%">实时: <font color='#CC0000'><span id="NetOutSpeed{$i}">K/s</span></font></td>
										</tr>
										
									{/for}
									</table>
                                </div>
                            </div>
                            <!--/.module-->
                            <div class="module">
                                <div class="module-head">
                                    <h3>京东商品价格关注列表</h3>
                                </div>
                                <div class="module-body table">
                                    <table cellpadding="0" cellspacing="0" border="0" class="datatable-1 table table-bordered table-striped	 display"
                                        width="100%">
                                        <thead>
                                            <tr>
                                                <th>
                                                    产品名称
                                                </th>
                                                <th>
                                                    产品类别
                                                </th>
                                                <th>
                                                    产品价格(/元)
                                                </th>
                                                <th>
                                                    产品编号
                                                </th>
                                                <th>
                                                    价格更新时间
                                                </th>
												<th>
                                                    操作
                                                </th>
                                            </tr>
                                        </thead>
										{for start="0" end="$task_jdprice_number"}
                                        <tbody id="jd_table_{$task_jdprice_value[$i]['product_number']}">
                                            <tr class="odd gradeX">
                                                <td>
                                                    {$task_jdprice_value[$i]["product_name"]}
                                                </td>
                                                <td>
                                                    {$task_jdprice_value[$i]["product_category"]}
                                                </td>
                                                <td id="jd_{$task_jdprice_value[$i]['product_number']}">
                                                    {$task_jdprice_value[$i]["product_Price"]}
                                                </td>
                                                <td class="center">
                                                    {$task_jdprice_value[$i]["product_number"]}
                                                </td>
                                                <td class="center">
                                                    {$task_jdprice_value[$i]["product_time"]}
                                                </td>
												<td class="center">
                                                    <button type="button" onclick="update_jd({$task_jdprice_value[$i]['product_number']})">更新</button>
                                                    <button type="button" onclick="delete_jd({$task_jdprice_value[$i]['product_number']})">删除</button>
                                                </td>
                                            </tr>
                                        </tbody>
										{/for}
                                        <tfoot>
                                            <tr>
                                                <th>
                                                    产品名称
                                                </th>
                                                <th>
                                                    产品类别
                                                </th>
                                                <th>
                                                    产品价格(/元)
                                                </th>
                                                <th>
                                                    产品编号
                                                </th>
                                                <th>
                                                    价格更新时间
                                                </th>
												<th>
                                                    操作
                                                </th>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                            <!--/.module-->
                        </div>
                        <!--/.content-->
                    </div>
                    <!--/.span9-->
                </div>
            </div>
            <!--/.container-->
        </div>
        <!--/.wrapper-->
		{include file="/admin/footer"}
		{include file="/admin/aliyundns"}
		<div id="light" class="white_content">
			<table>
			<form id="mail" onsubmit="return false" action="##" method="post">
			<tr>
				<td>收件人:</td>
				<td><input type="text" name="toemail" /></td>
			</tr>
			<tr>
				<td>标题:</td>
				<td><input type="text" name="title" /></td>
			</tr>
			<tr>
				<td>内容:</td>
				<td><textarea name="content" cols="50" rows="8"></textarea></td>
			</tr>
			<tr>
				<td></td>
				<td>
					<button type="button" onclick="sendmail()">发送</button>
					<button type="button" onclick="document.getElementById('light').style.display='none';">取消</button>
				</td>
			</tr>
			</form>
			</table>
		</div>
		<script src="{$Request.domain}/js/jquery.min.js" type="text/javascript"></script>
			<script type="text/javascript">
		function aliyun_top(){
			switch(document.aliyun.status.value){
				case "Select":
					if (document.aliyun.domain.value!=""){
						login();
					}else 
						alert("查询必须输入域名");
					break;
				case "Create":
					if (document.aliyun.domain.value!="" && document.aliyun.host.value!="" && document.aliyun.ip.value!=""){
						login();
					}else 
						alert("添加解析记录必须输入域名/主机记录/IP");
					break;
				case "Update":
					if (document.aliyun.domain.value!="" && document.aliyun.host.value!="" && document.aliyun.ip.value!=""){
						login();
					}else 
						alert("修改解析记录必须输入域名/主机记录/IP");
					break;
				case "Delete":
					if (document.aliyun.domain.value!="" && document.aliyun.host.value!=""){
						login();
					}else 
						alert("删除解析记录必须输入域名/主机记录");
					break;
				default:
			}
		}
		function login(){
			$.ajax({
			type: "POST",
			url: "/index/aliyundns",
			data: $('#aliyun').serialize(),
			dataType: 'JSON',
			timeout: 3000,
			success: function (result) {
				var jsonData = result; //返回的result为json格式的数据
				if (result.responseText == "Error"){
					alert(result.responseText);
				}
				<!-- var jsonData = eval("("+result.responseText+")"); -->
				var s = document.forms["aliyun"]["status"].value;
				switch(s){
					case "Select":
						con = "";
						con += "<tr><th>"+jsonData.PageNumber+"</th>";
						con += "<th>记录总数:"+jsonData.TotalCount+"</th>";
						con += "<th>解析数量:"+jsonData.PageSize+"</th>";
						<!-- con += "<th>识别码:"+jsonData.RequestId+"</th></tr>"; -->
						con += "<tr><th>主机记录</th><th>类型</th><th>记录值</th><th>线路</th><th>MX优先级</th><th>生存时间</th><th>状态</th><th>锁定状态</th></tr>";
						for (var i=0;i<jsonData.TotalCount;i++)
						{
							con += "<tr><td>"+jsonData.DomainRecords.Record[i].RR+"</td>";
							con += "<td>"+jsonData.DomainRecords.Record[i].Type+"</td>";
							con += "<td>"+jsonData.DomainRecords.Record[i].Value+"</td>";
							con += "<td>"+jsonData.DomainRecords.Record[i].Line+"</td>";
							var Priority = jsonData.DomainRecords.Record[i].Priority;
							if (typeof(Priority) == "undefined"){
								Priority = "--";
							}
							con += "<td>"+Priority + "</td>";
							con += "<td>"+jsonData.DomainRecords.Record[i].TTL+"</td>";
							con += "<td>"+jsonData.DomainRecords.Record[i].Status+"</td>";
							con += "<td>"+jsonData.DomainRecords.Record[i].Locked+"</td></tr>";
						}
						$("#con").html(con); //把内容入到这个div中即完成
						document.getElementById('aliyun_load').style.display='block';
						break;
					case "Create":
					  con = "";
						con += "<li>唯一请求识别码:"+jsonData.RequestId+"</li>";
						con += "<li>解析记录的ID:"+jsonData.RecordId+"</li>";
						$("#con").html(con); //把内容入到这个div中即完成
						document.getElementById('aliyun_load').style.display='block';
					  break;
					 case "Update":
					  con = "";
						con += "<li>唯一请求识别码:"+jsonData.RequestId+"</li>";
						con += "<li>解析记录的ID:"+jsonData.RecordId+"</li>";
						$("#con").html(con); //把内容入到这个div中即完成
						document.getElementById('aliyun_load').style.display='block';
					  break;
					 case "Delete":
						con = "";
						con += "<li>唯一请求识别码:"+jsonData.RequestId+"</li>";
						con += "<li>主机记录:"+jsonData.RR+"</li>";
						con += "<li>被删除的解析记录总数:"+jsonData.TotalCount+"</li>";
						$("#con").html(con); //把内容入到这个div中即完成
						document.getElementById('aliyun_load').style.display='block';
					  break;
					default:
						con = "ERROR!";
						$("#con").html(con); //把内容入到这个div中即完成
						document.getElementById('aliyun_load').style.display='block';
				}
			},
			error: function(result) {
				var jsonData = result;
				alert(jsonData.responseText);
			}
		});
		}
	</script>
		<script type="text/javascript">
			function sendmail(){
				$.ajax({
				type: "POST",
				url: "/index/admin/tomail",
				data: $('#mail').serialize(),
				dataType: 'JSON',
				timeout: 3000,
				success: function (result) {
					<!-- var jsonData = result; //返回的result为json格式的数据 -->
					<!-- alert(jsonData.responseText); -->
					alert(result);
				},
				error: function(result) {
					var jsonData = result;
					alert(jsonData.responseText);
				}
			});
		}
		</script>
		<script type="text/javascript">
			function update_jd(jd_number){
				$.ajax({
				type: "POST",
				url: "/index/jdapi/jd_update",
				data: {"id":jd_number},
				dataType: 'JSON',
				timeout: 3000,
				success: function (result) {
					document.getElementById("jd_"+jd_number).innerHTML=result;
				},
				error: function(result) {
					var jsonData = result;
					alert(jsonData.responseText);
				}
				});
			}
			function delete_jd(jd_number){
				$.ajax({
				type: "POST",
				url: "/index/jdapi/jd_delete",
				data: {"id":jd_number},
				dataType: 'JSON',
				timeout: 3000,
				success: function (result) {
					document.getElementById("jd_table_"+jd_number).innerHTML="<th>已经删除该记录</th>";
				},
				error: function(result) {
					var jsonData = result;
					alert(jsonData.responseText);
				}
				});
			}
		</script>
		<script type="text/javascript">
		$(document).ready(function(){
			network();
			setInterval("network()",1000);
		});
		var OutSpeed0="";
		var OutSpeed1="";
		var OutSpeed2="";
		var InputSpeed0="";
		var InputSpeed1="";
		var InputSpeed2="";
		var cpu_idle=0;
		var cpu_Total=0;
		var cpu="";
		function network(){
			$.ajax({
			type: "GET",
			url: "/index/admin/server",
			dataType: 'JSON',
			complete: function (result) {
				var jsonData = eval("("+result.responseText+")");
				if (cpu_idle != 0 && cpu_Total != 0){
					cpu=((1-(jsonData.cpu[0].cpu_idle-cpu_idle)/(jsonData.cpu[0].Total-cpu_Total))*100).toFixed(2)+"%";
					$("#cpu_html").html(cpu); 
					cpu_Total=jsonData.cpu[0].Total; 
					cpu_idle=jsonData.cpu[0].cpu_idle;
				}else {
					cpu_Total=jsonData.cpu[0].Total; 
					cpu_idle=jsonData.cpu[0].cpu_idle;
				}
				document.getElementById("disk_html").innerHTML=jsonData.disk; 
				document.getElementById("cpu_style").style.width=cpu; 
				document.getElementById("mem_html").innerHTML=jsonData.mem[0].Mempa+"%"; 
				document.getElementById("mem_style").style.width=jsonData.mem[0].Mempa+"%";
				document.getElementById("disk_style").style.width=jsonData.disk+"%";
				document.getElementById("mem_html_one").innerHTML="Memory "+jsonData.mem[0].MemFree + "/" + jsonData.mem[0].MemTotal + "M"; //把内容入到这个div中即完成
				$("#NetInput0").html(jsonData.net[0][2][0]);
				$("#NetOut0").html(jsonData.net[0][3][0]);
				$("#NetInput1").html(jsonData.net[0][2][1]);
				$("#NetOut1").html(jsonData.net[0][3][1]);
				$("#NetInput2").html(jsonData.net[0][2][2]);
				$("#NetOut2").html(jsonData.net[0][3][2]);
				data_(jsonData);
			}
			});
		}
		function data_ (dataJSON){
			$("#NetOutSpeed0").html(ForDight((dataJSON.net[0][0][0]-OutSpeed0),3));	OutSpeed0=dataJSON.net[0][0][0];
			$("#NetOutSpeed1").html(ForDight((dataJSON.net[0][0][1]-OutSpeed1),3));	OutSpeed1=dataJSON.net[0][0][1];
			$("#NetOutSpeed2").html(ForDight((dataJSON.net[0][0][2]-OutSpeed2),3));	OutSpeed2=dataJSON.net[0][0][2];
			$("#NetInputSpeed0").html(ForDight((dataJSON.net[0][1][0]-InputSpeed0),3));	InputSpeed0=dataJSON.net[0][1][0];
			$("#NetInputSpeed1").html(ForDight((dataJSON.net[0][1][1]-InputSpeed1),3));	InputSpeed1=dataJSON.net[0][1][1];
			$("#NetInputSpeed2").html(ForDight((dataJSON.net[0][1][2]-InputSpeed2),3));	InputSpeed2=dataJSON.net[0][1][2];
		}
		function ForDight(Dight,How)
		{ 
		  if (Dight<0){
			var Last=0+"B/s";
		  }else if (Dight<1024){
			var Last=Math.round(Dight*Math.pow(10,How))/Math.pow(10,How)+"B/s";
		  }else if (Dight<1048576){
			Dight=Dight/1024;
			var Last=Math.round(Dight*Math.pow(10,How))/Math.pow(10,How)+"K/s";
		  }else{
			Dight=Dight/1048576;
			var Last=Math.round(Dight*Math.pow(10,How))/Math.pow(10,How)+"M/s";
		  }
			return Last; 
		}
		</script>
		<script src="{$Request.domain}/scripts/jquery-1.9.1.min.js" type="text/javascript"></script>
        <script src="{$Request.domain}/scripts/jquery-ui-1.10.1.custom.min.js" type="text/javascript"></script>
        <script src="{$Request.domain}/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
        <script src="{$Request.domain}/scripts/flot/jquery.flot.js" type="text/javascript"></script>
        <script src="{$Request.domain}/scripts/flot/jquery.flot.resize.js" type="text/javascript"></script>
        <script src="{$Request.domain}/scripts/datatables/jquery.dataTables.js" type="text/javascript"></script>
        
</body>